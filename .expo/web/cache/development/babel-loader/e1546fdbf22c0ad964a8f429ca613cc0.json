{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar react_native_reanimated_1 = __importStar(require(\"react-native-reanimated\"));\n\nvar draggableFlatListContext_1 = require(\"../context/draggableFlatListContext\");\n\nvar constants_1 = require(\"../constants\");\n\nvar useCellTranslate_1 = require(\"../hooks/useCellTranslate\");\n\nvar utils_1 = require(\"../utils\");\n\nvar refContext_1 = require(\"../context/refContext\");\n\nvar animatedValueContext_1 = require(\"../context/animatedValueContext\");\n\nvar cellContext_1 = __importDefault(require(\"../context/cellContext\"));\n\nfunction CellRendererComponent(props) {\n  var item = props.item,\n      index = props.index,\n      onLayout = props.onLayout,\n      children = props.children;\n  var currentIndexAnim = react_native_reanimated_1.useValue(index);\n  react_1.useLayoutEffect(function () {\n    currentIndexAnim.setValue(index);\n  }, [index, currentIndexAnim]);\n  var viewRef = react_1.useRef(null);\n\n  var _a = refContext_1.useRefs(),\n      cellDataRef = _a.cellDataRef,\n      propsRef = _a.propsRef,\n      scrollOffsetRef = _a.scrollOffsetRef,\n      containerRef = _a.containerRef;\n\n  var horizontalAnim = animatedValueContext_1.useAnimatedValues().horizontalAnim;\n\n  var _b = draggableFlatListContext_1.useDraggableFlatListContext(),\n      activeKey = _b.activeKey,\n      keyExtractor = _b.keyExtractor,\n      horizontal = _b.horizontal;\n\n  var key = keyExtractor(item, index);\n  var offset = react_native_reanimated_1.useValue(-1);\n  var size = react_native_reanimated_1.useValue(-1);\n  var translate = useCellTranslate_1.useCellTranslate({\n    cellOffset: offset,\n    cellSize: size,\n    cellIndex: currentIndexAnim\n  });\n  react_1.useMemo(function () {\n    if (constants_1.isWeb) translate.setValue(0);\n  }, [index]);\n  var isActive = activeKey === key;\n  var style = react_1.useMemo(function () {\n    return {\n      transform: [{\n        translateX: react_native_reanimated_1.cond(horizontalAnim, translate, 0)\n      }, {\n        translateY: react_native_reanimated_1.cond(horizontalAnim, 0, translate)\n      }]\n    };\n  }, [horizontalAnim, translate]);\n  var updateCellMeasurements = react_1.useCallback(function () {\n    var _a;\n\n    var onSuccess = function onSuccess(x, y, w, h) {\n      if (constants_1.isWeb && horizontal) x += scrollOffsetRef.current;\n      var cellOffset = horizontal ? x : y;\n      var cellSize = horizontal ? w : h;\n      cellDataRef.current.set(key, {\n        measurements: {\n          size: cellSize,\n          offset: cellOffset\n        }\n      });\n      size.setValue(cellSize);\n      offset.setValue(cellOffset);\n    };\n\n    var onFail = function onFail() {\n      var _a;\n\n      if ((_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.debug) {\n        console.log(\"## on measure fail, index: \" + index);\n      }\n    };\n\n    var containerNode = containerRef.current;\n    var viewNode = constants_1.isReanimatedV2 ? viewRef.current : (_a = viewRef.current) === null || _a === void 0 ? void 0 : _a.getNode();\n    var nodeHandle = constants_1.isReanimatedV2 ? containerNode : react_native_1.findNodeHandle(containerNode);\n\n    if (viewNode && nodeHandle) {\n      viewNode.measureLayout(nodeHandle, onSuccess, onFail);\n    }\n  }, [cellDataRef, horizontal, index, key, offset, propsRef, size, scrollOffsetRef, containerRef]);\n  react_1.useEffect(function () {\n    if (constants_1.isWeb) {\n      updateCellMeasurements();\n    }\n  }, [index, updateCellMeasurements]);\n  var onCellLayout = react_1.useCallback(function (e) {\n    updateCellMeasurements();\n    if (onLayout) onLayout(e);\n  }, [updateCellMeasurements, onLayout]);\n  return react_1.default.createElement(react_native_reanimated_1.default.View, __assign({}, props, {\n    ref: viewRef,\n    onLayout: onCellLayout,\n    style: [constants_1.isAndroid && {\n      elevation: isActive ? 1 : 0\n    }, {\n      flexDirection: horizontal ? \"row\" : \"column\"\n    }, (constants_1.isWeb || constants_1.isIOS) && {\n      zIndex: isActive ? 999 : 0\n    }],\n    pointerEvents: activeKey ? \"none\" : \"auto\"\n  }), react_1.default.createElement(react_native_reanimated_1.default.View, __assign({}, props, {\n    style: [props.style, style]\n  }), react_1.default.createElement(cellContext_1.default, {\n    isActive: isActive\n  }, children)));\n}\n\nexports.default = utils_1.typedMemo(CellRendererComponent);","map":{"version":3,"sources":["/home/pagoto/Desktop/GITHUB/SipTender/node_modules/react-native-draggable-flatlist/lib/components/CellRendererComponent.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__createBinding","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","exports","react_1","require","react_native_reanimated_1","draggableFlatListContext_1","constants_1","useCellTranslate_1","utils_1","refContext_1","animatedValueContext_1","cellContext_1","CellRendererComponent","props","item","index","onLayout","children","currentIndexAnim","useValue","useLayoutEffect","setValue","viewRef","useRef","_a","useRefs","cellDataRef","propsRef","scrollOffsetRef","containerRef","horizontalAnim","useAnimatedValues","_b","useDraggableFlatListContext","activeKey","keyExtractor","horizontal","key","offset","size","translate","useCellTranslate","cellOffset","cellSize","cellIndex","useMemo","isWeb","isActive","style","transform","translateX","cond","translateY","updateCellMeasurements","useCallback","onSuccess","x","y","w","h","current","set","measurements","onFail","debug","console","log","containerNode","viewNode","isReanimatedV2","getNode","nodeHandle","react_native_1","findNodeHandle","measureLayout","useEffect","onCellLayout","e","default","createElement","View","ref","isAndroid","elevation","flexDirection","isIOS","zIndex","pointerEvents","typedMemo"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native\");\nvar react_native_reanimated_1 = __importStar(require(\"react-native-reanimated\"));\nvar draggableFlatListContext_1 = require(\"../context/draggableFlatListContext\");\nvar constants_1 = require(\"../constants\");\nvar useCellTranslate_1 = require(\"../hooks/useCellTranslate\");\nvar utils_1 = require(\"../utils\");\nvar refContext_1 = require(\"../context/refContext\");\nvar animatedValueContext_1 = require(\"../context/animatedValueContext\");\nvar cellContext_1 = __importDefault(require(\"../context/cellContext\"));\nfunction CellRendererComponent(props) {\n    var item = props.item, index = props.index, onLayout = props.onLayout, children = props.children;\n    var currentIndexAnim = react_native_reanimated_1.useValue(index);\n    react_1.useLayoutEffect(function () {\n        currentIndexAnim.setValue(index);\n    }, [index, currentIndexAnim]);\n    var viewRef = react_1.useRef(null);\n    var _a = refContext_1.useRefs(), cellDataRef = _a.cellDataRef, propsRef = _a.propsRef, scrollOffsetRef = _a.scrollOffsetRef, containerRef = _a.containerRef;\n    var horizontalAnim = animatedValueContext_1.useAnimatedValues().horizontalAnim;\n    var _b = draggableFlatListContext_1.useDraggableFlatListContext(), activeKey = _b.activeKey, keyExtractor = _b.keyExtractor, horizontal = _b.horizontal;\n    var key = keyExtractor(item, index);\n    var offset = react_native_reanimated_1.useValue(-1);\n    var size = react_native_reanimated_1.useValue(-1);\n    var translate = useCellTranslate_1.useCellTranslate({\n        cellOffset: offset,\n        cellSize: size,\n        cellIndex: currentIndexAnim,\n    });\n    react_1.useMemo(function () {\n        // prevent flicker on web\n        if (constants_1.isWeb)\n            translate.setValue(0);\n    }, [index]); //eslint-disable-line react-hooks/exhaustive-deps\n    var isActive = activeKey === key;\n    var style = react_1.useMemo(function () { return ({\n        transform: [\n            { translateX: react_native_reanimated_1.cond(horizontalAnim, translate, 0) },\n            { translateY: react_native_reanimated_1.cond(horizontalAnim, 0, translate) },\n        ],\n    }); }, [horizontalAnim, translate]);\n    var updateCellMeasurements = react_1.useCallback(function () {\n        var _a;\n        var onSuccess = function (x, y, w, h) {\n            if (constants_1.isWeb && horizontal)\n                x += scrollOffsetRef.current;\n            var cellOffset = horizontal ? x : y;\n            var cellSize = horizontal ? w : h;\n            cellDataRef.current.set(key, {\n                measurements: { size: cellSize, offset: cellOffset },\n            });\n            size.setValue(cellSize);\n            offset.setValue(cellOffset);\n        };\n        var onFail = function () {\n            var _a;\n            if ((_a = propsRef.current) === null || _a === void 0 ? void 0 : _a.debug) {\n                console.log(\"## on measure fail, index: \" + index);\n            }\n        };\n        // findNodeHandle is being deprecated. This is no longer necessary if using reanimated v2\n        // remove once v1 is no longer supported\n        var containerNode = containerRef.current;\n        var viewNode = constants_1.isReanimatedV2\n            ? viewRef.current\n            : (_a = viewRef.current) === null || _a === void 0 ? void 0 : _a.getNode();\n        //@ts-ignore\n        var nodeHandle = constants_1.isReanimatedV2\n            ? containerNode\n            : react_native_1.findNodeHandle(containerNode);\n        if (viewNode && nodeHandle) {\n            //@ts-ignore\n            viewNode.measureLayout(nodeHandle, onSuccess, onFail);\n        }\n    }, [\n        cellDataRef,\n        horizontal,\n        index,\n        key,\n        offset,\n        propsRef,\n        size,\n        scrollOffsetRef,\n        containerRef,\n    ]);\n    react_1.useEffect(function () {\n        if (constants_1.isWeb) {\n            // onLayout isn't called on web when the cell index changes, so we manually re-measure\n            updateCellMeasurements();\n        }\n    }, [index, updateCellMeasurements]);\n    var onCellLayout = react_1.useCallback(function (e) {\n        updateCellMeasurements();\n        if (onLayout)\n            onLayout(e);\n    }, [updateCellMeasurements, onLayout]);\n    // changing zIndex crashes android:\n    // https://github.com/facebook/react-native/issues/28751\n    return (react_1.default.createElement(react_native_reanimated_1.default.View, __assign({}, props, { ref: viewRef, onLayout: onCellLayout, style: [\n            constants_1.isAndroid && { elevation: isActive ? 1 : 0 },\n            { flexDirection: horizontal ? \"row\" : \"column\" },\n            (constants_1.isWeb || constants_1.isIOS) && { zIndex: isActive ? 999 : 0 },\n        ], pointerEvents: activeKey ? \"none\" : \"auto\" }),\n        react_1.default.createElement(react_native_reanimated_1.default.View, __assign({}, props, { \n            // Including both animated styles and non-animated styles causes react-native-web\n            // to ignore updates in non-animated styles. Solution is to separate animated styles from non-animated styles\n            style: [props.style, style] }),\n            react_1.default.createElement(cellContext_1.default, { isActive: isActive }, children))));\n}\nexports.default = utils_1.typedMemo(CellRendererComponent);\n"]},"metadata":{},"sourceType":"script"}